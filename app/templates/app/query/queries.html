{% extends 'app/base.html' %}

{% load app_tags %}

{% block title %}
    Места
{% endblock %}


{% block style %}
    <style>
        .sidebar_filter {
            z-index: 100;
            height: 100%;
            position: fixed;
            width: 400px;
            top: 0;
            right: -401px;
            transition: all .5s;
            background-color: white;
            display: flex;
            flex-direction: column;
            padding: 30px 10px;
        }

        .sidebar_filter .icon {
            align-self: end;
            font-size: 24px;
            cursor: pointer;
            margin-bottom: 30px;
            margin-top: -20px;
        }

        .sidebar_show {
            right: 0px !important;
        }

        .shadow_wrapper {
            bottom: 0;
            left: 0;
            position: fixed;
            right: 0;
            top: 0;
            z-index: -10;
            transition: background-color .1s;
            height: 100vh;
        }

        .wrapper_show {
            z-index: 10;
            background-color: rgba(0, 0, 0, .30);
        }


        .tags{
            display: flex;
            justify-content: center;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="icons"
         style="display: flex; justify-content: end; margin-bottom: 10px;margin-top: -10px; font-size: 19px">

       <span class="icon is-small" id="filter_icon">
           <i style="color: grey" class="fas fa-filter" aria-hidden="true"></i>
       </span>
    </div>
    <div class="shadow_wrapper" id="shadow_wrapper"></div>
    <div class="sidebar_filter box" id="sidebar_filter">
        <span class="icon is-small" id="close_icon">
            <i class="fa fa-times-circle"></i>
        </span>
        <form action="">
            <div class="field">
                <div class="control" style="display: flex">
                    <input type="text" required class="input" name="name" id="name" placeholder="search" value="">
                    <button type="submit" class="button is-warning"><i class="fa fa-search"></i></button>
                </div>
            </div>
            <div class="tags">
                {% for tag in tags %}
                    <div class="tag">
                        <input type="checkbox" name="tags" value="{{ tag.id }}">
                        <label for="">{{ tag.name }}</label>
                    </div>
                {% endfor %}
            </div>
        </form>
    </div>
    <div class="columns is-multiline">
        {% for query in queries %}
            <div class="column is-3" style="padding: 10px; box-sizing: border-box">
                <a class="box" href="{% url 'app:places' query.slug %}" style="display: flex; min-height: 140px">
                    <img src="{{ query|getBaseImg }}"
                         style="height: 120px !important; width: 150px !important; margin-right: 10px" alt="">
                    <div>
                        <span>{{ query }}</span>
                        <p>Объектов: {{ query.places_count }}</p>
                    </div>
                </a>
            </div>
        {% endfor %}
    </div>

    {% include 'app/include/pagination.html' with page=queries %}
{% endblock %}

{% block script %}
    <script>
        function sidebarShow() {
            let sidebar = document.getElementById('sidebar_filter');
            sidebar.classList.toggle('sidebar_show');
            let wrapper = document.getElementById('shadow_wrapper');
            wrapper.classList.toggle('wrapper_show')
        }

        let filter_icon = document.getElementById('filter_icon');
        filter_icon.addEventListener('click', sidebarShow)

        let close_icon = document.getElementById('close_icon');
        close_icon.addEventListener('click', sidebarShow)
    </script>
{% endblock %}